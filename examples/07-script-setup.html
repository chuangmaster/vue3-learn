<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>07 - Script Setup èªæ³•ç³–</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1, h2 {
            color: #2c3e50;
        }
        .example {
            margin: 20px 0;
            padding: 15px;
            border: 2px solid #e74c3c;
            border-radius: 5px;
            background: #fff6f6;
        }
        .code {
            background: #f4f4f4;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 10px;
            margin: 10px 0;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
            font-size: 0.9em;
        }
        button {
            background: #e74c3c;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #c0392b;
        }
        input, select, textarea {
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin: 5px;
        }
        .highlight {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            padding: 12px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .tip-box {
            background: #e8f4fd;
            border: 1px solid #b3d7ff;
            padding: 12px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .new-feature {
            background: #e8f5e9;
            border: 1px solid #c8e6c9;
            padding: 12px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .warning {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            padding: 12px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .demo {
            border: 2px dashed #e74c3c;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            background: #fefefe;
        }
        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 15px 0;
        }
        .comparison-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 6px;
            border: 1px solid #ddd;
        }
        .comparison-item h4 {
            margin-top: 0;
            color: #495057;
        }
        @media (max-width: 768px) {
            .comparison {
                grid-template-columns: 1fr;
            }
        }
        .macro-list {
            background: #f0f8ff;
            border: 1px solid #b3d9ff;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>âœ¨ ç¬¬ä¸ƒèª²ï¼šScript Setup èªæ³•ç³–</h1>
        
        <h2>ğŸ¯ ä»€éº¼æ˜¯ `<script setup>`ï¼Ÿ</h2>
        <p>`<script setup>` æ˜¯ Vue 3.2+ å¼•å…¥çš„ç·¨è­¯æ™‚èªæ³•ç³–ï¼Œè®“ä½ èƒ½ä»¥æ›´ç°¡æ½”çš„æ–¹å¼ç·¨å¯« Composition API ä»£ç¢¼ã€‚</p>
        
        <div class="new-feature">
            <strong>ğŸ†• Vue 3.3+ æ–°å¢ï¼š</strong>æ›´å¤šå¼·å¤§çš„ç·¨è­¯å™¨å®å¦‚ `defineModel`ã€`defineSlots` ç­‰ï¼Œè®“é–‹ç™¼æ›´åŠ ä¾¿æ·ï¼
        </div>

        <!-- ç¯„ä¾‹ 1: åŸºæœ¬èªæ³•å°æ¯” -->
        <div class="example">
            <h3>ç¯„ä¾‹ 1ï¼šåŸºæœ¬èªæ³•å°æ¯”</h3>
            <div class="comparison">
                <div class="comparison-item">
                    <h4>ğŸš€ ä½¿ç”¨ &lt;script setup&gt;</h4>
                    <div class="code">
&lt;script setup&gt;
import { ref, computed } from 'vue'

// ç›´æ¥è²æ˜å°±å¯ä»¥åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨
const count = ref(0)
const doubleCount = computed(() => count.value * 2)

function increment() {
  count.value++
}

// è‡ªå‹•æš´éœ²çµ¦æ¨¡æ¿ï¼Œç„¡éœ€ return
&lt;/script&gt;</div>
                </div>
                
                <div class="comparison-item">
                    <h4>ğŸ“ å‚³çµ± Composition API</h4>
                    <div class="code">
&lt;script&gt;
import { ref, computed } from 'vue'

export default {
  setup() {
    const count = ref(0)
    const doubleCount = computed(() => count.value * 2)

    function increment() {
      count.value++
    }

    // å¿…é ˆæ‰‹å‹• return
    return {
      count,
      doubleCount,
      increment
    }
  }
}
&lt;/script&gt;</div>
                </div>
            </div>
            
            <div class="demo">
                <div id="app1"></div>
            </div>
        </div>

        <!-- ç¯„ä¾‹ 2: defineProps -->
        <div class="example">
            <h3>ç¯„ä¾‹ 2ï¼šdefineProps - å®šç¾© Props</h3>
            <div class="demo">
                <div id="app2"></div>
            </div>
            <div class="code">
&lt;script setup&gt;
// åŸºæœ¬ç”¨æ³•
const props = defineProps(['title', 'count'])

// TypeScript æ¨è–¦ç”¨æ³•
const props = defineProps&lt;{
  title: string
  count?: number
}&gt;()

// å¸¶æœ‰é»˜èªå€¼çš„ç”¨æ³•
const props = withDefaults(defineProps&lt;{
  title: string
  count?: number
  type?: 'primary' | 'secondary'
}&gt;(), {
  count: 0,
  type: 'primary'
})

// é‹è¡Œæ™‚è²æ˜ï¼ˆå¸¶é©—è¨¼ï¼‰
const props = defineProps({
  title: {
    type: String,
    required: true
  },
  count: {
    type: Number,
    default: 0,
    validator: (value) =&gt; value &gt;= 0
  }
})
&lt;/script&gt;</div>
        </div>

        <!-- ç¯„ä¾‹ 3: defineEmits -->
        <div class="example">
            <h3>ç¯„ä¾‹ 3ï¼šdefineEmits - å®šç¾©äº‹ä»¶</h3>
            <div class="demo">
                <div id="app3"></div>
            </div>
            <div class="code">
&lt;script setup&gt;
// åŸºæœ¬ç”¨æ³•
const emit = defineEmits(['update', 'delete'])

// TypeScript æ¨è–¦ç”¨æ³•
const emit = defineEmits&lt;{
  update: [id: number, value: string]
  delete: [id: number]
  submit: []  // ç„¡åƒæ•¸äº‹ä»¶
}&gt;()

// é‹è¡Œæ™‚è²æ˜ï¼ˆå¸¶é©—è¨¼ï¼‰
const emit = defineEmits({
  update: (id, value) =&gt; {
    return typeof id === 'number' && typeof value === 'string'
  },
  delete: (id) =&gt; typeof id === 'number',
  submit: null  // ç„¡é©—è¨¼
})

function handleUpdate(value) {
  emit('update', props.id, value)
}
&lt;/script&gt;</div>
        </div>

        <!-- ç¯„ä¾‹ 4: defineModel -->
        <div class="example">
            <h3>ç¯„ä¾‹ 4ï¼šdefineModel - v-model èªæ³•ç³– (Vue 3.3+)</h3>
            <div class="demo">
                <div id="app4"></div>
            </div>
            <div class="code">
&lt;!-- çˆ¶çµ„ä»¶ --&gt;
&lt;CustomInput v-model="message" /&gt;

&lt;!-- å­çµ„ä»¶ - ä½¿ç”¨ defineModel --&gt;
&lt;script setup&gt;
// ğŸ‰ è¶…ç°¡å–®çš„ v-model å¯¦ç¾ï¼
const model = defineModel()

// ç­‰åŒæ–¼ä»¥ä¸‹ä»£ç¢¼ï¼š
// const props = defineProps(['modelValue'])
// const emit = defineEmits(['update:modelValue'])
// const model = computed({
//   get: () =&gt; props.modelValue,
//   set: (val) =&gt; emit('update:modelValue', val)
// })
&lt;/script&gt;

&lt;template&gt;
  &lt;input v-model="model" /&gt;
&lt;/template&gt;</div>
            
            <div class="new-feature">
                <strong>ğŸš€ defineModel å„ªå‹¢ï¼š</strong>å¤§å¹…ç°¡åŒ–äº† v-model çš„å¯¦ç¾ï¼Œä¸å†éœ€è¦æ‰‹å¯« props + emit çš„æ¨¡å¼ï¼
            </div>
        </div>

        <!-- ç¯„ä¾‹ 5: å¤šå€‹ v-model -->
        <div class="example">
            <h3>ç¯„ä¾‹ 5ï¼šå¤šå€‹ v-model èˆ‡ä¿®é£¾ç¬¦</h3>
            <div class="demo">
                <div id="app5"></div>
            </div>
            <div class="code">
&lt;script setup&gt;
// å¤šå€‹ v-model
const firstName = defineModel('firstName')
const lastName = defineModel('lastName')

// å¸¶é»˜èªå€¼
const age = defineModel('age', { default: 18 })

// å¸¶ä¿®é£¾ç¬¦çš„ v-model
const username = defineModel('username', {
  set(value) {
    // è‡ªå®šç¾©è™•ç†é‚è¼¯
    return value.toLowerCase().trim()
  }
})

// ä¿®é£¾ç¬¦çš„é«˜ç´šç”¨æ³•
const email = defineModel('email', {
  get(value) {
    return value
  },
  set(value, modifiers) {
    if (modifiers.trim) {
      return value.trim()
    }
    if (modifiers.capitalize) {
      return value.charAt(0).toUpperCase() + value.slice(1)
    }
    return value
  }
})
&lt;/script&gt;

&lt;!-- ä½¿ç”¨æ–¹å¼ --&gt;
&lt;UserForm 
  v-model:firstName="user.firstName"
  v-model:lastName="user.lastName" 
  v-model:age="user.age"
  v-model:username="user.username"
  v-model:email.trim="user.email"
/&gt;</div>
        </div>

        <!-- ç¯„ä¾‹ 6: defineExpose -->
        <div class="example">
            <h3>ç¯„ä¾‹ 6ï¼šdefineExpose - æš´éœ²çµ„ä»¶æ–¹æ³•</h3>
            <div class="demo">
                <div id="app6"></div>
            </div>
            <div class="code">
&lt;script setup&gt;
import { ref } from 'vue'

const count = ref(0)
const message = ref('Hello')

function increment() {
  count.value++
}

function reset() {
  count.value = 0
  message.value = 'Reset!'
}

// æ˜ç¢ºæŒ‡å®šå“ªäº›å…§å®¹å°çˆ¶çµ„ä»¶å¯è¦‹
defineExpose({
  count,
  reset,
  // ä¸æš´éœ² increment å’Œ message
})
&lt;/script&gt;

&lt;!-- çˆ¶çµ„ä»¶ä¸­ --&gt;
&lt;script setup&gt;
const childRef = ref()

function resetChild() {
  childRef.value.reset()  // âœ… å¯ä»¥èª¿ç”¨
  // childRef.value.increment()  // âŒ ç„¡æ³•èª¿ç”¨ï¼Œæœªæš´éœ²
}
&lt;/script&gt;

&lt;template&gt;
  &lt;ChildComponent ref="childRef" /&gt;
&lt;/template&gt;</div>
        </div>

        <!-- ç¯„ä¾‹ 7: defineSlots (Vue 3.3+) -->
        <div class="example">
            <h3>ç¯„ä¾‹ 7ï¼šdefineSlots - TypeScript æ’æ§½æ”¯æŒ (Vue 3.3+)</h3>
            <div class="demo">
                <div id="app7"></div>
            </div>
            <div class="code">
&lt;script setup lang="ts"&gt;
// ç‚ºæ’æ§½æä¾› TypeScript é¡å‹æ”¯æŒ
defineSlots&lt;{
  default(props: { message: string }): any
  header(): any
  footer(props: { year: number }): any
}&gt;()

// ä¹Ÿå¯ä»¥ä½¿ç”¨å‡½æ•¸èªæ³•
defineSlots&lt;{
  default: (props: { message: string }) =&gt; any
  header: () =&gt; any
  footer: (props: { year: number }) =&gt; any
}&gt;()
&lt;/script&gt;

&lt;template&gt;
  &lt;div&gt;
    &lt;slot name="header"&gt;&lt;/slot&gt;
    &lt;slot :message="'Hello from slot'"&gt;&lt;/slot&gt;
    &lt;slot name="footer" :year="2024"&gt;&lt;/slot&gt;
  &lt;/div&gt;
&lt;/template&gt;</div>
            
            <div class="tip-box">
                <strong>ğŸ’¡ defineSlots ä½œç”¨ï¼š</strong>ä¸»è¦ç‚º TypeScript ç”¨æˆ¶æä¾›æ’æ§½çš„é¡å‹æª¢æŸ¥ï¼Œé‹è¡Œæ™‚ç„¡å¯¦éš›æ•ˆæœã€‚
            </div>
        </div>

        <!-- ç¯„ä¾‹ 8: å¯¦éš›æ‡‰ç”¨ç¶œåˆç¤ºä¾‹ -->
        <div class="example">
            <h3>ç¯„ä¾‹ 8ï¼šç¶œåˆå¯¦æˆ° - ç”¨æˆ¶ç·¨è¼¯çµ„ä»¶</h3>
            <div class="demo">
                <div id="app8"></div>
            </div>
            <div class="code">
&lt;script setup&gt;
// Props å®šç¾©
const props = withDefaults(defineProps&lt;{
  user?: {
    name: string
    email: string
    age: number
  }
  readonly?: boolean
}&gt;(), {
  readonly: false
})

// äº‹ä»¶å®šç¾©
const emit = defineEmits&lt;{
  save: [user: { name: string; email: string; age: number }]
  cancel: []
}&gt;()

// v-model å®šç¾©
const name = defineModel('name', { default: '' })
const email = defineModel('email', { default: '' })
const age = defineModel('age', { default: 18 })

// å…§éƒ¨ç‹€æ…‹
const isValid = computed(() =&gt; 
  name.value.length &gt; 0 && 
  email.value.includes('@') && 
  age.value &gt; 0
)

// æ–¹æ³•
function handleSave() {
  if (isValid.value) {
    emit('save', {
      name: name.value,
      email: email.value,
      age: age.value
    })
  }
}

function handleCancel() {
  emit('cancel')
}

// æš´éœ²çµ¦çˆ¶çµ„ä»¶
defineExpose({
  isValid,
  save: handleSave
})
&lt;/script&gt;</div>
        </div>

        <!-- ç·¨è­¯å™¨å®åˆ—è¡¨ -->
        <div class="macro-list">
            <h3>ğŸ› ï¸ ç·¨è­¯å™¨å®å®Œæ•´åˆ—è¡¨</h3>
            <ul>
                <li><strong>defineProps</strong> - å®šç¾©çµ„ä»¶ props</li>
                <li><strong>defineEmits</strong> - å®šç¾©çµ„ä»¶äº‹ä»¶</li>
                <li><strong>defineModel</strong> - å®šç¾© v-model (Vue 3.3+)</li>
                <li><strong>defineExpose</strong> - æš´éœ²çµ„ä»¶å…§éƒ¨æ–¹æ³•/ç‹€æ…‹</li>
                <li><strong>defineSlots</strong> - TypeScript æ’æ§½é¡å‹ (Vue 3.3+)</li>
                <li><strong>withDefaults</strong> - ç‚º props æä¾›é»˜èªå€¼</li>
                <li><strong>defineOptions</strong> - å®šç¾©çµ„ä»¶é¸é … (Vue 3.3+)</li>
            </ul>
        </div>

        <!-- æœ€ä½³å¯¦è¸ -->
        <div class="highlight">
            <h3>âœ… æœ€ä½³å¯¦è¸</h3>
            <ul>
                <li><strong>TypeScript å„ªå…ˆï¼š</strong>ä½¿ç”¨ TypeScript èªæ³•ç²å¾—æ›´å¥½çš„é¡å‹æ”¯æŒå’Œé–‹ç™¼é«”é©—</li>
                <li><strong>defineModel å„ªå…ˆï¼š</strong>Vue 3.3+ å»ºè­°ä½¿ç”¨ defineModel ä»£æ›¿æ‰‹å‹•å¯¦ç¾ v-model</li>
                <li><strong>é©åº¦æš´éœ²ï¼š</strong>ä½¿ç”¨ defineExpose åªæš´éœ²å¿…è¦çš„æ–¹æ³•å’Œç‹€æ…‹</li>
                <li><strong>åˆç†é»˜èªå€¼ï¼š</strong>ä½¿ç”¨ withDefaults ç‚º props æä¾›åˆç†çš„é»˜èªå€¼</li>
                <li><strong>äº‹ä»¶å‘½åï¼š</strong>ä½¿ç”¨æ¸…æ™°çš„äº‹ä»¶å‘½åï¼Œéµå¾ª update:propName ç´„å®š</li>
            </ul>
        </div>

        <div class="warning">
            <h3>âš ï¸ æ³¨æ„äº‹é …</h3>
            <ul>
                <li>ç·¨è­¯å™¨å®åªèƒ½åœ¨ &lt;script setup&gt; ä¸­ä½¿ç”¨</li>
                <li>defineModel éœ€è¦ Vue 3.3+ ç‰ˆæœ¬æ”¯æŒ</li>
                <li>ä¸èƒ½åœ¨æ¢ä»¶èªå¥æˆ–å‡½æ•¸ä¸­èª¿ç”¨é€™äº›å®</li>
                <li>å®æœƒåœ¨ç·¨è­¯æ™‚å±•é–‹ï¼Œé‹è¡Œæ™‚ä¸å­˜åœ¨</li>
            </ul>
        </div>

        <h2>ğŸ“– é‡é»ç¸½çµ</h2>
        <ul>
            <li><strong>&lt;script setup&gt;</strong> æä¾›äº†æ›´ç°¡æ½”çš„èªæ³•</li>
            <li><strong>defineModel</strong> å¤§å¹…ç°¡åŒ–äº† v-model çš„å¯¦ç¾</li>
            <li><strong>ç¼–è­¯å™¨å®</strong>è®“çµ„ä»¶é–‹ç™¼æ›´åŠ ä¾¿æ·å’Œé¡å‹å®‰å…¨</li>
            <li><strong>TypeScript æ”¯æŒ</strong>å¾—åˆ°äº†å…¨é¢åŠ å¼·</li>
        </ul>

        <h2>ğŸ¯ æ­å–œå®Œæˆï¼</h2>
        <p>ğŸ‰ ä½ å·²ç¶“å®Œæˆäº†æ•´å€‹ Vue 3 å­¸ç¿’æ•™ç¨‹ï¼ç¾åœ¨ä½ å·²ç¶“æŒæ¡äº†ï¼š</p>
        <ul>
            <li><a href="01-basic-composition-api.html">âœ… åŸºç¤ Composition API</a></li>
            <li><a href="02-reactive-refs.html">âœ… éŸ¿æ‡‰å¼ç³»çµ±æ·±å…¥</a></li>
            <li><a href="03-computed-watch.html">âœ… è¨ˆç®—å±¬æ€§èˆ‡ç›£è½å™¨</a></li>
            <li><a href="04-lifecycle.html">âœ… ç”Ÿå‘½é€±æœŸé‰¤å­</a></li>
            <li><a href="05-composables.html">âœ… Composables é€²éš</a></li>
            <li><a href="06-advanced.html">âœ… é€²éšç‰¹æ€§æ¢ç´¢</a></li>
            <li><strong>âœ… Script Setup èªæ³•ç³–ï¼ˆç•¶å‰ï¼‰</strong></li>
        </ul>
        
        <div class="highlight">
            <h3>ğŸš€ å®Œæ•´å­¸ç¿’è·¯å¾‘é”æˆï¼</h3>
            <p>ä½ ç¾åœ¨å·²ç¶“å…·å‚™äº†ä½¿ç”¨ç¾ä»£ Vue 3 é–‹ç™¼æ‡‰ç”¨çš„æ‰€æœ‰å¿…è¦æŠ€èƒ½ï¼š</p>
            <ul>
                <li>âœ… Composition API çš„æ ¸å¿ƒæ¦‚å¿µ</li>
                <li>âœ… éŸ¿æ‡‰å¼ç³»çµ±çš„æ·±å…¥ç†è§£</li>
                <li>âœ… ç”Ÿå‘½é€±æœŸå’Œå‰¯ä½œç”¨ç®¡ç†</li>
                <li>âœ… å¯é‡ç”¨é‚è¼¯çš„ Composables æ¨¡å¼</li>
                <li>âœ… é«˜ç´šç‰¹æ€§å¦‚ Teleportã€Suspense</li>
                <li>âœ… ç¾ä»£åŒ–çš„ Script Setup èªæ³•ç³–</li>
            </ul>
        </div>

        <h2>ğŸ¯ ä¸‹ä¸€æ­¥</h2>
        <ul>
            <li><a href="06-advanced.html">â† ä¸Šä¸€èª²ï¼šé€²éšç‰¹æ€§æ¢ç´¢</a></li>
            <li><a href="../README.md">ğŸ“– å›åˆ°ç¸½æ•™ç¨‹</a></li>
            <li><a href="../index.html">ğŸ  å›åˆ°é¦–é </a></li>
        </ul>
        
        <div class="tip-box">
            <h3>ğŸ“ å­¸ç¿’å»ºè­°</h3>
            <ul>
                <li><strong>å¯¦æˆ°ç·´ç¿’ï¼š</strong>å‰µå»ºä¸€å€‹å®Œæ•´çš„ Vue 3 é …ç›®ï¼Œæ‡‰ç”¨æ‰€æœ‰å­¸åˆ°çš„æ¦‚å¿µ</li>
                <li><strong>ç”Ÿæ…‹æ¢ç´¢ï¼š</strong>å­¸ç¿’ Piniaï¼ˆç‹€æ…‹ç®¡ç†ï¼‰ã€Vue Router 4ã€VueUse</li>
                <li><strong>å·¥å…·éˆï¼š</strong>ç†Ÿæ‚‰ Viteã€TypeScriptã€ESLint ç­‰ç¾ä»£å·¥å…·</li>
                <li><strong>ç¤¾å€åƒèˆ‡ï¼š</strong>åœ¨ GitHub ä¸Šç€è¦½å„ªç§€çš„ Vue 3 é …ç›®æºç¢¼</li>
            </ul>
        </div>
    </div>

    <script>
        const { createApp, ref, computed, defineComponent } = Vue
        
        // æ¨¡æ“¬ script setup çš„æ•ˆæœï¼Œå› ç‚ºæˆ‘å€‘åœ¨ç€è¦½å™¨ç’°å¢ƒä¸­ç„¡æ³•ç›´æ¥ä½¿ç”¨ <script setup>
        
        // ç¯„ä¾‹ 1ï¼šåŸºæœ¬èªæ³•æ¼”ç¤º
        createApp({
            template: `
                <div>
                    <h4>âœ¨ æ¨¡æ“¬ &lt;script setup&gt; æ•ˆæœ</h4>
                    <p>è¨ˆæ•¸ï¼š{{ count }}</p>
                    <p>é›™å€è¨ˆæ•¸ï¼š{{ doubleCount }}</p>
                    <button @click="increment">å¢åŠ </button>
                    <button @click="count = 0">é‡ç½®</button>
                    <p><small>æ³¨æ„ï¼šç€è¦½å™¨ç’°å¢ƒä¸­æˆ‘å€‘æ¨¡æ“¬ script setup çš„æ•ˆæœ</small></p>
                </div>
            `,
            setup() {
                // æ¨¡æ“¬ <script setup> çš„ç°¡æ½”æ€§
                const count = ref(0)
                const doubleCount = computed(() => count.value * 2)

                function increment() {
                    count.value++
                }

                // åœ¨ <script setup> ä¸­ï¼Œé€™äº›æœƒè‡ªå‹•æš´éœ²ï¼Œç„¡éœ€æ‰‹å‹• return
                return { count, doubleCount, increment }
            }
        }).mount('#app1')

        // ç¯„ä¾‹ 2ï¼šProps æ¼”ç¤º
        createApp({
            template: `
                <div>
                    <h4>ğŸ“‹ Props æ¼”ç¤º</h4>
                    <props-demo 
                        :title="title" 
                        :count="count" 
                        type="primary"
                        @update="handleUpdate"
                    />
                    <div style="margin: 10px 0;">
                        <input v-model="title" placeholder="ä¿®æ”¹æ¨™é¡Œ">
                        <input type="number" v-model.number="count" placeholder="ä¿®æ”¹æ•¸é‡">
                    </div>
                </div>
            `,
            setup() {
                const title = ref('æ¸¬è©¦æ¨™é¡Œ')
                const count = ref(5)

                function handleUpdate(newTitle, newCount) {
                    title.value = newTitle
                    count.value = newCount
                }

                return { title, count, handleUpdate }
            },
            components: {
                'props-demo': defineComponent({
                    props: {
                        title: {
                            type: String,
                            required: true
                        },
                        count: {
                            type: Number,
                            default: 0,
                            validator: (value) => value >= 0
                        },
                        type: {
                            type: String,
                            default: 'primary'
                        }
                    },
                    emits: ['update'],
                    template: `
                        <div style="border: 1px solid #ddd; padding: 10px; border-radius: 4px; background: #f8f9fa;">
                            <h5>{{ title }}</h5>
                            <p>æ•¸é‡ï¼š{{ count }} (é¡å‹ï¼š{{ type }})</p>
                            <button @click="$emit('update', title + ' (æ›´æ–°)', count + 1)">
                                è§¸ç™¼æ›´æ–°äº‹ä»¶
                            </button>
                        </div>
                    `
                })
            }
        }).mount('#app2')

        // ç¯„ä¾‹ 3ï¼šEmits æ¼”ç¤º  
        createApp({
            template: `
                <div>
                    <h4>ğŸ“¡ äº‹ä»¶æ¼”ç¤º</h4>
                    <emits-demo @update="handleUpdate" @delete="handleDelete" @submit="handleSubmit" />
                    <div v-if="lastEvent" style="margin: 10px 0; padding: 10px; background: #e8f5e9; border-radius: 4px;">
                        æœ€å¾Œäº‹ä»¶ï¼š{{ lastEvent }}
                    </div>
                </div>
            `,
            setup() {
                const lastEvent = ref('')

                function handleUpdate(id, value) {
                    lastEvent.value = \`Update: ID=\${id}, Value=\${value}\`
                }

                function handleDelete(id) {
                    lastEvent.value = \`Delete: ID=\${id}\`
                }

                function handleSubmit() {
                    lastEvent.value = 'Submit: ç„¡åƒæ•¸'
                }

                return {
                    lastEvent,
                    handleUpdate,
                    handleDelete,
                    handleSubmit
                }
            },
            components: {
                'emits-demo': defineComponent({
                    emits: {
                        update: (id, value) => {
                            return typeof id === 'number' && typeof value === 'string'
                        },
                        delete: (id) => typeof id === 'number',
                        submit: null
                    },
                    template: `
                        <div style="border: 1px solid #ddd; padding: 10px; border-radius: 4px; background: #f0f8ff;">
                            <h5>äº‹ä»¶ç™¼é€çµ„ä»¶</h5>
                            <button @click="$emit('update', 123, 'test value')">
                                ç™¼é€ Update äº‹ä»¶
                            </button>
                            <button @click="$emit('delete', 456)">
                                ç™¼é€ Delete äº‹ä»¶
                            </button>
                            <button @click="$emit('submit')">
                                ç™¼é€ Submit äº‹ä»¶
                            </button>
                        </div>
                    `
                })
            }
        }).mount('#app3')

        // ç¯„ä¾‹ 4ï¼šæ¨¡æ“¬ defineModel
        createApp({
            template: `
                <div>
                    <h4>ğŸ¯ v-model èªæ³•ç³–æ¼”ç¤º</h4>
                    <p>çˆ¶çµ„ä»¶å€¼ï¼š{{ message }}</p>
                    <custom-input v-model="message" />
                    <div style="margin: 10px 0;">
                        <input v-model="message" placeholder="çˆ¶çµ„ä»¶ç›´æ¥ä¿®æ”¹">
                    </div>
                    <p><small>å…©å€‹è¼¸å…¥æ¡†æœƒä¿æŒåŒæ­¥</small></p>
                </div>
            `,
            setup() {
                const message = ref('Hello defineModel!')
                return { message }
            },
            components: {
                'custom-input': defineComponent({
                    props: ['modelValue'],
                    emits: ['update:modelValue'],
                    template: `
                        <div style="border: 1px solid #ddd; padding: 10px; border-radius: 4px; background: #fff8f0;">
                            <label>å­çµ„ä»¶ (æ¨¡æ“¬ defineModel)ï¼š</label>
                            <input 
                                :value="modelValue" 
                                @input="$emit('update:modelValue', $event.target.value)"
                                style="width: 200px;"
                            />
                        </div>
                    `
                })
            }
        }).mount('#app4')

        // ç¯„ä¾‹ 5ï¼šå¤šå€‹ v-model æ¼”ç¤º
        createApp({
            template: `
                <div>
                    <h4>ğŸ‘¥ å¤šå€‹ v-model æ¼”ç¤º</h4>
                    <multi-model-form 
                        v-model:firstName="user.firstName"
                        v-model:lastName="user.lastName"
                        v-model:age="user.age"
                    />
                    <div style="margin: 10px 0; padding: 10px; background: #f8f9fa; border-radius: 4px;">
                        <strong>ç”¨æˆ¶è³‡è¨Šï¼š</strong><br>
                        å§“åï¼š{{ user.firstName }} {{ user.lastName }}<br>
                        å¹´é½¡ï¼š{{ user.age }}
                    </div>
                </div>
            `,
            setup() {
                const user = ref({
                    firstName: 'å¼µ',
                    lastName: 'å°æ˜',
                    age: 25
                })

                return { user }
            },
            components: {
                'multi-model-form': defineComponent({
                    props: ['firstName', 'lastName', 'age'],
                    emits: ['update:firstName', 'update:lastName', 'update:age'],
                    template: `
                        <div style="border: 1px solid #ddd; padding: 15px; border-radius: 4px; background: #f0fff0;">
                            <h5>å¤šå€‹ v-model è¡¨å–®</h5>
                            <div>
                                <label>å§“æ°ï¼š</label>
                                <input 
                                    :value="firstName" 
                                    @input="$emit('update:firstName', $event.target.value)"
                                >
                            </div>
                            <div>
                                <label>åå­—ï¼š</label>
                                <input 
                                    :value="lastName" 
                                    @input="$emit('update:lastName', $event.target.value)"
                                >
                            </div>
                            <div>
                                <label>å¹´é½¡ï¼š</label>
                                <input 
                                    type="number" 
                                    :value="age" 
                                    @input="$emit('update:age', Number($event.target.value))"
                                >
                            </div>
                        </div>
                    `
                })
            }
        }).mount('#app5')

        // ç¯„ä¾‹ 6ï¼šdefineExpose æ¼”ç¤º
        createApp({
            template: `
                <div>
                    <h4>ğŸ”“ defineExpose æ¼”ç¤º</h4>
                    <expose-demo ref="childRef" />
                    <div style="margin: 10px 0;">
                        <button @click="resetChild">çˆ¶çµ„ä»¶é‡ç½®å­çµ„ä»¶</button>
                        <button @click="getChildCount">ç²å–å­çµ„ä»¶è¨ˆæ•¸</button>
                    </div>
                    <p v-if="childCount !== null">å­çµ„ä»¶è¨ˆæ•¸ï¼š{{ childCount }}</p>
                </div>
            `,
            setup() {
                const childRef = ref()
                const childCount = ref(null)

                function resetChild() {
                    if (childRef.value) {
                        childRef.value.reset()
                    }
                }

                function getChildCount() {
                    if (childRef.value) {
                        childCount.value = childRef.value.count
                    }
                }

                return {
                    childRef,
                    childCount,
                    resetChild,
                    getChildCount
                }
            },
            components: {
                'expose-demo': defineComponent({
                    template: `
                        <div style="border: 1px solid #ddd; padding: 10px; border-radius: 4px; background: #fff0f5;">
                            <h5>å­çµ„ä»¶</h5>
                            <p>è¨ˆæ•¸ï¼š{{ count }}</p>
                            <p>ä¿¡æ¯ï¼š{{ message }}</p>
                            <button @click="increment">å¢åŠ  (å…§éƒ¨æ–¹æ³•)</button>
                        </div>
                    `,
                    setup(props, { expose }) {
                        const count = ref(0)
                        const message = ref('Hello')

                        function increment() {
                            count.value++
                        }

                        function reset() {
                            count.value = 0
                            message.value = 'Reset!'
                        }

                        // æ¨¡æ“¬ defineExpose
                        expose({
                            count: computed(() => count.value),
                            reset
                            // æ³¨æ„ï¼šincrement å’Œ message æ²’æœ‰æš´éœ²
                        })

                        return {
                            count,
                            message,
                            increment
                        }
                    }
                })
            }
        }).mount('#app6')

        // ç¯„ä¾‹ 7ï¼šæ’æ§½æ¼”ç¤º
        createApp({
            template: `
                <div>
                    <h4>ğŸ“¦ æ’æ§½é¡å‹æ¼”ç¤º</h4>
                    <slot-demo>
                        <template #header>
                            <h5 style="color: #e74c3c;">è‡ªå®šç¾©æ¨™é¡Œ</h5>
                        </template>
                        
                        <template #default="{ message }">
                            <p>æ¥æ”¶åˆ°æ’æ§½æ•¸æ“šï¼š{{ message }}</p>
                        </template>
                        
                        <template #footer="{ year }">
                            <small>ç‰ˆæ¬Šæ‰€æœ‰ Â© {{ year }}</small>
                        </template>
                    </slot-demo>
                </div>
            `,
            components: {
                'slot-demo': defineComponent({
                    template: `
                        <div style="border: 1px solid #ddd; padding: 15px; border-radius: 4px; background: #f9f9f9;">
                            <slot name="header"></slot>
                            <slot :message="'Hello from slot'"></slot>
                            <slot name="footer" :year="2024"></slot>
                        </div>
                    `
                })
            }
        }).mount('#app7')

        // ç¯„ä¾‹ 8ï¼šç¶œåˆå¯¦æˆ°
        createApp({
            template: `
                <div>
                    <h4>ğŸ¯ ç¶œåˆå¯¦æˆ°ï¼šç”¨æˆ¶ç·¨è¼¯çµ„ä»¶</h4>
                    <user-editor 
                        v-model:name="userData.name"
                        v-model:email="userData.email"
                        v-model:age="userData.age"
                        :readonly="isReadonly"
                        @save="handleSave"
                        @cancel="handleCancel"
                        ref="editorRef"
                    />
                    <div style="margin: 10px 0;">
                        <label>
                            <input type="checkbox" v-model="isReadonly">
                            åªè®€æ¨¡å¼
                        </label>
                        <button @click="forceValidation" style="margin-left: 10px;">
                            æª¢æŸ¥è¡¨å–®æœ‰æ•ˆæ€§
                        </button>
                    </div>
                    <div v-if="saveMessage" style="margin: 10px 0; padding: 10px; background: #d4edda; border-radius: 4px;">
                        {{ saveMessage }}
                    </div>
                </div>
            `,
            setup() {
                const userData = ref({
                    name: 'John Doe',
                    email: 'john@example.com',
                    age: 30
                })
                const isReadonly = ref(false)
                const saveMessage = ref('')
                const editorRef = ref()

                function handleSave(user) {
                    saveMessage.value = \`ç”¨æˆ¶å·²ä¿å­˜ï¼š\${JSON.stringify(user)}\`
                    setTimeout(() => saveMessage.value = '', 3000)
                }

                function handleCancel() {
                    saveMessage.value = 'æ“ä½œå·²å–æ¶ˆ'
                    setTimeout(() => saveMessage.value = '', 2000)
                }

                function forceValidation() {
                    const isValid = editorRef.value?.isValid
                    alert(\`è¡¨å–®æœ‰æ•ˆæ€§ï¼š\${isValid ? 'âœ… æœ‰æ•ˆ' : 'âŒ ç„¡æ•ˆ'}\`)
                }

                return {
                    userData,
                    isReadonly,
                    saveMessage,
                    editorRef,
                    handleSave,
                    handleCancel,
                    forceValidation
                }
            },
            components: {
                'user-editor': defineComponent({
                    props: {
                        name: String,
                        email: String,
                        age: Number,
                        readonly: Boolean
                    },
                    emits: ['update:name', 'update:email', 'update:age', 'save', 'cancel'],
                    template: `
                        <div style="border: 2px solid #e74c3c; padding: 15px; border-radius: 8px; background: #fff;">
                            <h5>ç”¨æˆ¶ç·¨è¼¯å™¨</h5>
                            <div style="margin: 10px 0;">
                                <label>å§“åï¼š</label>
                                <input 
                                    :value="name" 
                                    @input="$emit('update:name', $event.target.value)"
                                    :readonly="readonly"
                                    :style="readonly ? 'background: #f5f5f5' : ''"
                                >
                            </div>
                            <div style="margin: 10px 0;">
                                <label>éƒµç®±ï¼š</label>
                                <input 
                                    :value="email" 
                                    @input="$emit('update:email', $event.target.value)"
                                    :readonly="readonly"
                                    :style="readonly ? 'background: #f5f5f5' : ''"
                                >
                            </div>
                            <div style="margin: 10px 0;">
                                <label>å¹´é½¡ï¼š</label>
                                <input 
                                    type="number" 
                                    :value="age" 
                                    @input="$emit('update:age', Number($event.target.value))"
                                    :readonly="readonly"
                                    :style="readonly ? 'background: #f5f5f5' : ''"
                                >
                            </div>
                            <div style="margin: 10px 0;" v-if="!readonly">
                                <button @click="handleSave" :disabled="!isValid" :style="!isValid ? 'opacity: 0.5' : ''">
                                    ğŸ’¾ ä¿å­˜
                                </button>
                                <button @click="$emit('cancel')" style="margin-left: 5px;">
                                    âŒ å–æ¶ˆ
                                </button>
                            </div>
                            <div style="font-size: 0.9em; color: #666;">
                                è¡¨å–®ç‹€æ…‹ï¼š{{ isValid ? 'âœ… æœ‰æ•ˆ' : 'âŒ ç„¡æ•ˆ' }}
                            </div>
                        </div>
                    `,
                    setup(props, { emit, expose }) {
                        const isValid = computed(() => 
                            props.name && props.name.length > 0 && 
                            props.email && props.email.includes('@') && 
                            props.age && props.age > 0
                        )

                        function handleSave() {
                            if (isValid.value) {
                                emit('save', {
                                    name: props.name,
                                    email: props.email,
                                    age: props.age
                                })
                            }
                        }

                        // æ¨¡æ“¬ defineExpose
                        expose({
                            isValid,
                            save: handleSave
                        })

                        return {
                            isValid,
                            handleSave
                        }
                    }
                })
            }
        }).mount('#app8')
    </script>
</body>
</html>